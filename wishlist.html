<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="icon_image.png" type="image/icon type">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVIEFLIX</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=Libre+Baskerville&family=Libre+Franklin:wght@100;500&family=Lora&family=Merriweather:wght@300&family=Montserrat:wght@100;900&family=Open+Sans:wght@300;700&family=PT+Sans&family=Playfair+Display&family=Raleway:wght@100;200;300&family=Salsa&display=swap" rel="stylesheet">
    <!-- css link --> <link rel="stylesheet" href="wishlist.css">
    <!-- fontawsome css link -->  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>
<body>
    <header>
        <!-- webpage name  image -->
        <div onclick="gethomepage()" class="nameIMG"></div>

        <!-- different section -->
        <div class="section">
            <div class="sectionType"><a href="movies.html">MOVIES</a></div>
            <div class="sectionType"><a href="tv-shows.html">TV SERIES</a></div>
            <div class="sectionType"><a href="popular.html" >POPULAR</a></div>
            <div class="sectionType"><a href="tranding.html">TRENDING</a></div>
            <div class="account sectionType" id="updateName" style="cursor: pointer;"><a><i class="fa-solid fa-user" style="color: #bdbdbd;"></i></a></div>
            <input id="hello" style="display: none;" value="hello">

        </div>
        
        
        <div class="menuBTN" onclick="showMenuBar()"></div>
        <div class="searchBTN" onclick="showSearchBar()"></div>

        <!-- //search button -->
        <!-- <div class="searchbar">
            <form id="form"><input id="search" style="border-style: none;" placeholder="Search Your Movie"></form>   
        </div> -->

    </header>


    <div class="account-settings">
        <a href="log-in.html" class="sign-out" id="Sign-Out">Sign-out</a>
        <a href="wishlist.html" href="#" class="wishlist">Wishlist</a>
        <a href="account-settings.html" class="settings">Settings</a>
        <a href="rating.html" class="settings">Ratings</a>
    </div>


    <!-- side navbar -->
    <nav>
        <div class="sideNavBar1">
        
            <!-- different categories -->
            <div class="NavBarHeading">Genre</div>
            <div class="categories"><a href="adventure.html">Adventure</a></div>
            <div class="categories"><a href="fanteny.html">Fantasy</a></div>
            <div class="categories"><a href="animation.html">Animation</a></div>
            <div class="categories"><a href="darma.html">Drama</a></div>
            <div class="categories"><a href="horror.html">Horror</a></div>
            <div class="categories"><a href="action.html">Action</a></div>
            <div class="categories"><a href="comedy.html">Comedy</a></div>
            <div class="categories"><a href="history.html">History</a></div>
            <div class="categories"><a href="western.html">Western</a></div>
            <div class="categories"><a href="thriller.html">Thriller</a></div>
            <div class="categories"><a href="crime.html">Crime</a></div>
            <div class="categories"><a href="documentary.html">Dcumentary</a></div>
            <div class="categories"><a href="science-fiction.html">Science-Fiction</a></div>
            <div class="categories"><a href="mistry.html">Mystery</a></div>
            <div class="categories"><a href="music.html">Music</a></div>
            <div class="categories"><a href="romance.html">Romance</a></div>
            <div class="categories"><a href="family.html">Family</a></div>
            <div class="categories"><a href="war.html">War</a></div>
           
            <!-- choose your language -->
            <div class="NavBarHeading">Language</div>
            <div class="categories"><a href="english.html">English</a></div>
            <div class="categories"><a href="hindi.html">Hindi</a></div>
            <div class="categories"><a href="bengali.html">Bengali</a></div>
            <!-- user account -->
            <div class="copyright">movieflix@265aa</div>

        </div>

        <div class="sideNavBar"> 
            <div class="genre">
                <div class="NavBarHeading">Genre</div>
                <div id="category">
                    <div class="categories"><a href="adventure.html">Adventure</a></div>
                <div class="categories"><a href="fanteny.html">Fantasy</a></div>
                <div class="categories"><a href="animation.html">Animation</a></div>
                <div class="categories"><a href="darma.html">Drama</a></div>
                <div class="categories"><a href="horror.html">Horror</a></div>
                <div class="categories"><a href="action.html">Action</a></div>
                <div class="categories"><a href="comedy.html">Comedy</a></div>
                <div class="categories"><a href="history.html">History</a></div>
                <div class="categories"><a href="western.html">Western</a></div>
                <div class="categories"><a href="thriller.html">Thriller</a></div>
                <div class="categories"><a href="crime.html">Crime</a></div>
                <div class="categories"><a href="documentary.html">Dcumentary</a></div>
                <div class="categories"><a href="science-fiction.html">Science-Fiction</a></div>
                <div class="categories"><a href="mistry.html">Mystery</a></div>
                <div class="categories"><a href="music.html">Music</a></div>
                <div class="categories"><a href="romance.html">Romance</a></div>
                <div class="categories"><a href="family.html">Family</a></div>
                <div class="categories"><a href="war.html">War</a></div>
                </div>
            </div>
            <div class="language-account-copyright">
                <div class="language">
                    <div class="NavBarHeading">Language</div>
                    <div class="categories"><a href="english.html">English</a></div>
                    <div class="categories"><a href="hindi.html">Hindi</a></div>
                    <div class="categories"><a href="bengali.html">Bengali</a></div>
                </div>
                <div class="copyright">movieflix@265aa</div>
            </div>
            
        </div>
    </nav>

    <main>
        
        <div class="whishlist">
            
            <div class="movie-wrapper">
               
                <div class="movie-list">
                    <p class="heading">Get&nbsp; All&nbsp;  Your&nbsp;Wishlisted&nbsp; Movies&nbsp;  Here</p>
                    <div class="notsaved">
                        <img src="upset.png">Uppss.... You didn't save any movie!!!
                    </div>
                </div>


                <div class="movie-list">
                    <p class="heading">Get&nbsp; All&nbsp;  Your&nbsp;Wishlisted&nbsp; Tv-Series&nbsp;  Here</p>
                    <div class="notsaved">
                        <img src="upset.png">Uppss.... You didn't save any series!!!
                    </div>
                </div>
                
            </div>


        </div>
    </main>
    <script src="wishlist.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getDatabase, ref , get, child , remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyACFoTUxtBAzWHg4c1-2vC9UAumSmmzjnY",
          authDomain: "movieflix-c7a43.firebaseapp.com",
          databaseURL: "https://movieflix-c7a43-default-rtdb.firebaseio.com",
          projectId: "movieflix-c7a43",
          storageBucket: "movieflix-c7a43.appspot.com",
          messagingSenderId: "289003154218",
          appId: "1:289003154218:web:9a994bece8172785824c53",
          measurementId: "G-F52DXVS77G"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getDatabase();
        const dbref = ref(db);

        let movieList0 = document.getElementsByClassName("movie-list")[0]
        let movieList1 = document.getElementsByClassName("movie-list")[1]
        let notsaved0 = document.getElementsByClassName("notsaved")[0]
        let notsaved1 = document.getElementsByClassName("notsaved")[1]
        console.log(notsaved1)

        let bv = window.localStorage.getItem("user-id")
        console.log(bv)

        Getmovies()
        function Getmovies() {
            get(child(dbref, `Users/${bv}/movie/`)).then((movie)=>{
                if(movie){
                    movie.forEach(item =>{
                        addmovies(item)
                        console.log(item)
                    })
                }
            })
        }
        function addmovies(item) {
            let key = item.key
            let value = item.val()

            console.log(key,value)

            let movieNO = 0;
            
            notsaved0.innerHTML=""
            notsaved0.style.padding = 0
            let movieItem = document.createElement("div")
            movieItem.classList.add("movie-item")
            movieItem.innerHTML=`
                <img class="movie-image" onclick="getMovieDetails(${value.idOfMovie})" src="${value.imageofMovie}">
                <div class="description" onclick="getMovieDetails(${value.idOfMovie})">
                    <div class="name">${value.nameofMovie}</div>
                    <div class="watch"><button>Watch</button><span class="${getcolour(value.ratingofMovie)}"><i class="fa-solid fa-star" style="color: #ffbb00;"></i>&nbsp;${value.ratingofMovie}</span></div>
                </div>
                <div class="movie-name">${value.nameofMovie}</div>
                <div class="ratingAndYear">
                    <div class="rating ${getcolour(value.ratingofMovie)}"><i class="fa-solid fa-star" style="color: #ffbb00;"></i>&nbsp;${value.ratingofMovie}</div>
                    <div class="year">${value.releaseyearofMovie}</div>
                </div>

                <button class="remove0">Remove</button>
            `
            movieList0.appendChild(movieItem)
            movieNO ++

            let removeMovie = Array.from(document.getElementsByClassName("remove0"))
            removeMovie.forEach((data , index)=>{
                let a = document.getElementsByClassName("movie-name")[index].innerHTML
                data.addEventListener("click" , ()=>{
                    remove(ref(db ,  `Users/${bv}/movie/${a}` )).then(()=>{
                        data.innerHTML=`Deleted`
                    })
                    .then(()=>{
                        window.location.reload()
                    })
                    .catch((error)=>{
                        alert("unsuccessful , error - " + error )
                    })
                })
            })           
        }


        Getseries()
        function Getseries() {
            get(child(dbref, `Users/${bv}/series/`)).then((serie)=>{
                if(serie){
                    serie.forEach(item =>{
                        addseries(item)
                        console.log(item)
                    })
                }
            })
        }
        function addseries(item) {
            let key = item.key
            let value = item.val()

            console.log(key,value)

            let movieNO = 0;
            
            notsaved1.innerHTML=""
            notsaved1.style.padding = 0
            let movieItem = document.createElement("div")
            movieItem.classList.add("movie-item")
            movieItem.innerHTML=`
                <img class="movie-image" onclick="getwebseriesDetails(${value.idOfseries})" src="${value.imageofseries}">
                <div class="description" onclick="getwebseriesDetails(${value.idOfseries})">
                    <div class="name">${value.nameofseries}</div>
                    <div class="watch"><button>Watch</button><span class="${getcolour(value.ratingofseries)}"><i class="fa-solid fa-star" style="color: #ffbb00;"></i>&nbsp;${value.ratingofseries}</span></div>
                </div>
                <div class="movie-name series-name">${value.nameofseries}</div>
                <div class="ratingAndYear">
                    <div class="rating ${getcolour(value.ratingofseries)}"><i class="fa-solid fa-star" style="color: #ffbb00;"></i>&nbsp;${value.ratingofseries}</div>
                    <div class="year">${value.releaseyearofseries}</div>
                </div>

                <button class="remove1">Remove</button>
            `
            movieList1.appendChild(movieItem)
            movieNO ++

            let removeseries = Array.from(document.getElementsByClassName("remove1"))
            removeseries.forEach((data , index)=>{
                let b = document.getElementsByClassName("series-name")[index].innerHTML
                data.addEventListener("click" , ()=>{
                    remove(ref(db ,  `Users/${bv}/series/${b}` )).then(()=>{
                        data.innerHTML=`Deleted`
                    })
                    .then(()=>{
                            window.location.reload()
                    })
                    .catch((error)=>{
                        alert("unsuccessful , error - " + error )
                    })
                })
            })
            
        }
        


        function getcolour(input){
            if(input > 7){
                return "green";
            }
            else if(input > 5){
                return "orange"
            }
            else{
                return "red"
            }
        } 

        
      </script>
</body>
</html>